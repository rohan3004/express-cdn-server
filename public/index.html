<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Video Player</title>
    <style>
        /* Basic Reset & Font */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #121212;
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            min-height: 100vh;
            margin: 0;
        }

        /* Main container for the video player */
        .video-container {
            width: 90%;
            max-width: 900px;
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2), 0 6px 6px rgba(0, 0, 0, 0.25);
        }
        
        /* Make the video fill the container */
        video {
            width: 100%;
            display: block;
        }

        /* Controls container - overlays the video */
        .video-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 10px;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.7), transparent);
            display: flex;
            flex-direction: column;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }

        /* Show controls on hover or when video is paused */
        .video-container:hover .video-controls,
        .video-container.paused .video-controls {
            opacity: 1;
        }

        /* Top part of the controls (progress bar) */
        .controls-top {
            display: flex;
            align-items: center;
            width: 100%;
        }
        
        /* Progress bar styling */
        .progress-bar {
            flex-grow: 1;
            height: 8px;
            background-color: rgba(255, 255, 255, 0.3);
            cursor: pointer;
            border-radius: 4px;
            margin: 0 10px;
            position: relative;
        }

        .progress-filled {
            height: 100%;
            width: 0;
            background-color: #ff0000;
            border-radius: 4px;
            transition: width 0.1s linear;
        }
        
        /* Bottom part of the controls (buttons, time, volume) */
        .controls-bottom {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 5px;
        }

        .controls-left, .controls-right {
            display: flex;
            align-items: center;
        }

        /* General button styling */
        .control-button {
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .control-button svg {
            width: 24px;
            height: 24px;
            fill: #fff;
            transition: transform 0.2s ease;
        }

        .control-button:hover svg {
            transform: scale(1.1);
        }
        
        /* Time display */
        .time-display {
            font-size: 14px;
            margin-left: 10px;
        }

        /* Volume controls container */
        .volume-controls {
            display: flex;
            align-items: center;
        }

        .volume-slider {
            width: 0;
            height: 4px;
            background: #fff;
            outline: none;
            transition: width 0.2s ease-in-out;
            cursor: pointer;
            opacity: 0;
            margin-left: 5px;
        }
        
        /* Show volume slider on hover */
        .volume-controls:hover .volume-slider {
            width: 80px;
            opacity: 1;
        }
    </style>
</head>
<body>

    <h1>Modern Video Player</h1>

    <div class="video-container" id="videoContainer">
        <video id="video" src="/api/video/videoplayback.mp4" preload="metadata"></video>
        
        <div class="video-controls" id="videoControls">
            <div class="controls-top">
                <div class="progress-bar" id="progressBar">
                    <div class="progress-filled" id="progressFilled"></div>
                </div>
            </div>
            <div class="controls-bottom">
                <div class="controls-left">
                    <button class="control-button" id="playPauseBtn">
                        <svg viewBox="0 0 36 36">
                            <path d="M 12,26 18.5,22 18.5,14 12,10 z M 18.5,22 25,18 25,18 18.5,14 z"></path>
                        </svg>
                    </button>
                    <div class="volume-controls">
                        <button class="control-button" id="muteBtn">
                            <svg viewBox="0 0 36 36">
                                <path d="M8,21 L12,21 L17,26 L17,10 L12,15 L8,15 L8,21 Z M19,14 L19,22 C20.48,21.32 21.5,19.77 21.5,18 C21.5,16.23 20.48,14.68 19,14 Z M19,11.29 C21.89,12.15 24,14.83 24,18 C24,21.17 21.89,23.85 19,24.71 L19,26.77 C23.01,25.86 26,22.28 26,18 C26,13.72 23.01,10.14 19,9.23 L19,11.29 Z"></path>
                            </svg>
                        </button>
                        <input type="range" class="volume-slider" id="volumeSlider" min="0" max="1" step="0.01" value="1">
                    </div>
                    <div class="time-display" id="timeDisplay">00:00 / 00:00</div>
                </div>
                <div class="controls-right">
                    <button class="control-button" id="fullscreenBtn">
                        <svg viewBox="0 0 36 36">
                            <g>
                                <path d="M 10,16 10,10 16,10 M 20,10 26,10 26,16 M 10,20 10,26 16,26 M 20,26 26,26 26,20"></path>
                            </g>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Get all necessary DOM elements
        const videoContainer = document.getElementById('videoContainer');
        const video = document.getElementById('video');
        const videoControls = document.getElementById('videoControls');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const progressBar = document.getElementById('progressBar');
        const progressFilled = document.getElementById('progressFilled');
        const muteBtn = document.getElementById('muteBtn');
        const volumeSlider = document.getElementById('volumeSlider');
        const timeDisplay = document.getElementById('timeDisplay');
        const fullscreenBtn = document.getElementById('fullscreenBtn');

        // SVG icons for play, pause, mute, unmute
        const playIcon = `<svg viewBox="0 0 36 36"><path d="M 12,26 18.5,22 18.5,14 12,10 z M 18.5,22 25,18 25,18 18.5,14 z"></path></svg>`;
        const pauseIcon = `<svg viewBox="0 0 36 36"><path d="M 12,26 16,26 16,10 12,10 z M 21,26 25,26 25,10 21,10 z"></path></svg>`;
        const muteIcon = `<svg viewBox="0 0 36 36"><path d="M8,21 L12,21 L17,26 L17,10 L12,15 L8,15 L8,21 Z M19,14 L19,22 C20.48,21.32 21.5,19.77 21.5,18 C21.5,16.23 20.48,14.68 19,14 Z M19,11.29 C21.89,12.15 24,14.83 24,18 C24,21.17 21.89,23.85 19,24.71 L19,26.77 C23.01,25.86 26,22.28 26,18 C26,13.72 23.01,10.14 19,9.23 L19,11.29 Z"></path></svg>`;
        const unmuteIcon = `<svg viewBox="0 0 36 36"><path d="M8,21 L12,21 L17,26 L17,10 L12,15 L8,15 L8,21 Z"></path></svg>`;

        // --- CORE FUNCTIONALITY ---

        // Toggle play/pause
        function togglePlay() {
            if (video.paused) {
                video.play();
                playPauseBtn.innerHTML = pauseIcon;
                videoContainer.classList.remove('paused');
            } else {
                video.pause();
                playPauseBtn.innerHTML = playIcon;
                videoContainer.classList.add('paused');
            }
        }

        // Update progress bar
        function updateProgress() {
            const progressPercentage = (video.currentTime / video.duration) * 100;
            progressFilled.style.width = `${progressPercentage}%`;
            update_time();
        }

        // Set video progress on seek
        function setProgress(e) {
            const newTime = (e.offsetX / progressBar.offsetWidth) * video.duration;
            video.currentTime = newTime;
        }

        // Update time display
        function update_time() {
            const currentMinutes = Math.floor(video.currentTime / 60);
            const currentSeconds = Math.floor(video.currentTime - currentMinutes * 60);
            const durationMinutes = Math.floor(video.duration / 60);
            const durationSeconds = Math.floor(video.duration - durationMinutes * 60);

            timeDisplay.textContent = `${String(currentMinutes).padStart(2, '0')}:${String(currentSeconds).padStart(2, '0')} / ${String(durationMinutes).padStart(2, '0')}:${String(durationSeconds).padStart(2, '0')}`;
        }

        // Toggle mute/unmute
        function toggleMute() {
            video.muted = !video.muted;
            if (video.muted) {
                muteBtn.innerHTML = unmuteIcon;
                volumeSlider.value = 0;
            } else {
                muteBtn.innerHTML = muteIcon;
                volumeSlider.value = video.volume;
            }
        }

        // Handle volume change
        function handleVolumeChange() {
            video.volume = volumeSlider.value;
            video.muted = volumeSlider.value === 0;
            muteBtn.innerHTML = video.muted ? unmuteIcon : muteIcon;
        }
        
        // Toggle fullscreen
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                videoContainer.requestFullscreen().catch(err => {
                    alert(`Error attempting to enable full-screen mode: ${err.message} (${err.name})`);
                });
            } else {
                document.exitFullscreen();
            }
        }


        // --- EVENT LISTENERS ---

        // Play/Pause
        playPauseBtn.addEventListener('click', togglePlay);
        video.addEventListener('click', togglePlay);
        video.addEventListener('play', () => videoContainer.classList.remove('paused'));
        video.addEventListener('pause', () => videoContainer.classList.add('paused'));

        // Progress Bar
        video.addEventListener('timeupdate', updateProgress);
        video.addEventListener('loadedmetadata', update_time);
        progressBar.addEventListener('click', setProgress);

        // Volume
        muteBtn.addEventListener('click', toggleMute);
        volumeSlider.addEventListener('input', handleVolumeChange);

        // Fullscreen
        fullscreenBtn.addEventListener('click', toggleFullscreen);
        
        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            switch(e.key.toLowerCase()) {
                case ' ':
                case 'k':
                    e.preventDefault();
                    togglePlay();
                    break;
                case 'm':
                    toggleMute();
                    break;
                case 'f':
                    toggleFullscreen();
                    break;
                case 'arrowleft':
                    video.currentTime -= 5;
                    break;
                case 'arrowright':
                    video.currentTime += 5;
                    break;
            }
        });
    </script>
</body>
</html>
